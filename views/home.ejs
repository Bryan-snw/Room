<%- include('partials/header-home') %>

    <h2 hidden id="status" ><%= status[0].langganan %></h2>
    <h2 hidden id="jumlah" ><%= room %></h2>    

    <!--Scan Barcode-->
    <div class="container-fluid">
        <div class="">
            <h1 >Scan Barcode</h1>
            <a href="/scan/room">
                <div class="scan-qr center">
                    <img class="img-sc-qr" src="Images/scan-qr.png" alt="BArcode">
                </div>
            </a>
        </div>
    </div>

    <!--My Room-->
    <div class="container-fluid">
        <!--Header Content-->
        <div class="header-content">
            <div class="row">

                <div class="col-lg-6 d-flex justify-content-left">
                    <h1>My Room</h1>
                </div>

                <div class="col-lg-6">
                    <h5 class="show-all"><a href="tampilsemua/my-room">Show All</a></h5>
                </div>

            </div>
        </div>

        <!--Content-->
        <div class="content">
            <div class="row">
                <div class="col-lg-3 col-md-6">
                    
                    <!-- Modal Toogle -->
                    <div role="button" id="buatroom" class="card room" data-toggle="modal" data-target="#buat">
                        <div class="add-room-card">
                            <i class="fas fa-plus-circle"></i>
                        </div>
                        
                        <div class="card-body">
                            <h5 class="card-title">Buat Room</h5>
                        </div>
                    </div>
                    
                    <!-- Modal -->
                    <div class="modal fade" id="buat" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
                        <div class="modal-dialog modal-dialog-centered" role="document">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <h5 class="modal-title" id="exampleModalLongTitle">Ingin buat room untuk apa?</h5>
                                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                        <span aria-hidden="true">&times;</span>
                                    </button>
                                </div>
                                <div class="modal-body">
                                    <a href="room-bukutamu">
                                        <button type="button" class="btn btn-outline-primary">Buku Tamu</button>
                                    </a>
                                    <a href="room-event">
                                        <button type="button" class="btn btn-outline-primary">Event</button>
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Modal -->
                    <div class="modal fade" id="batas" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
                        <div class="modal-dialog modal-dialog-centered" role="document">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <h5 class="modal-title" id="exampleModalLongTitle">Pemberitahuan</h5>
                                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                        <span aria-hidden="true">&times;</span>
                                    </button>
                                </div>
                                <div class="modal-body">
                                    <p>Sudah Mencapai Limit User Gratis</p>
                                </div>
                            </div>
                        </div>
                    </div>

                </div>

                <% myroom.forEach(function(foundRoom){ %>
                    <div class="col-lg-3 col-md-6" >

                        
                        <div class="card room" role="button" data-toggle="modal" data-target="#<%=foundRoom._id%>">
                            <div class="foto-card ">
                                <img src="data:image/<%=foundRoom.img.contentType%>;base64,
                                <%=foundRoom.img.data.toString('base64')%>" class=" img-card" alt="Picture">
                            </div>
                            
                            <div class="card-body" >
                                    <h5 class="card-title" data-toggle="tooltip" data-placement="top" title="<%= foundRoom.room.kegiatan %>">
                                        <%= foundRoom.room.kegiatan.substring(0, 15) %>
                                    </h5>
                            </div>
                        </div>
                    
    
                    </div>       

                    <!-- Modal -->
                    <div class="modal fade" id="<%=foundRoom._id%>" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
                        <div class="modal-dialog modal-dialog-centered" role="document">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <h5 class="modal-title" id="exampleModalLongTitle">Apa yang anda ingin lakukan?</h5>
                                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                        <span aria-hidden="true">&times;</span>
                                    </button>
                                </div>
                                <div class="modal-body">
                                    <a href="/room/edit/<%=foundRoom._id%>">
                                        <button type="button" class="btn btn-outline-primary">Edit</button>
                                    </a>
                                    <a href="room/buka/<%=foundRoom._id%>">
                                        <button type="button" class="btn btn-outline-primary">Buka</button>
                                    </a>
                                    <a href="room/hapus/<%=foundRoom._id%>">
                                        <button type="button" class="btn btn-outline-primary">Hapus</button>
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>


                <% }); %> 

                              
            </div>

        </div>

    </div>

    <!--Event-->
    <div class="container-fluid">
        <!--Header Content-->
        <div class="header-content">
            <div class="row">

                <div class="col-lg-6 d-flex justify-content-left">
                    <h1>Event</h1>
                </div>

                <div class="col-lg-6 ">
                    <h5 class="show-all"><a href="tampilsemua/event">Show All</a></h5>
                </div>

            </div>
        </div>

        <!--Content-->
        <div class="content">
            <div class="row">

                <% event.forEach(function(foundRoom){ %>
                    <div class="col-lg-3 col-md-6" >

                        
                        <div class="card room" role="button" data-toggle="modal" data-target="#<%=foundRoom._id%>">
                            <div class="foto-card ">
                                <img src="data:image/<%=foundRoom.img.contentType%>;base64,
                                <%=foundRoom.img.data.toString('base64')%>" class=" img-card" alt="Picture">
                            </div>
                            
                            <div class="card-body" >
                                    <h5 class="card-title" data-toggle="tooltip" data-placement="top" title="<%= foundRoom.room.kegiatan %>">
                                        <%= foundRoom.room.kegiatan.substring(0, 15) %>
                                    </h5>
                            </div>
                        </div>
                    
    
                    </div>       

                    <!-- Modal -->
                    <div class="modal fade" id="<%=foundRoom._id%>" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
                        <div class="modal-dialog modal-dialog-centered" role="document">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <h5 class="modal-title" id="exampleModalLongTitle">Apa yang anda ingin lakukan?</h5>
                                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                        <span aria-hidden="true">&times;</span>
                                    </button>
                                </div>
                                <div class="modal-body">
                                    <a href="/room/edit/peserta/<%=foundRoom._id%>">
                                        <button type="button" class="btn btn-outline-primary">Edit</button>
                                    </a>
                                    <a href="/room/buka/peserta/<%=foundRoom._id%>">
                                        <button type="button" class="btn btn-outline-primary">Buka</button>
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>


                <% }); %> 

                              
            </div>

        </div>

    </div>

    <!--Guestbook-->
    <div class="container-fluid">
        <!--Header Content-->
        <div class="header-content">
            <div class="row">

                <div class="col-lg-6 d-flex justify-content-left">
                    <h1>Buku Tamu</h1>
                </div>

                <div class="col-lg-6 ">
                    <h5 class="show-all"><a href="tampilsemua/buku-tamu">Show All</a></h5>
                </div>

            </div>
        </div>

        <!--Content-->
        <div class="content">
            <div class="row">

                <% bukutamu.forEach(function(foundRoom){ %>
                    <div class="col-lg-3 col-md-6" >

                        
                        <div class="card room" role="button" data-toggle="modal" data-target="#<%=foundRoom._id%>">
                            <div class="foto-card ">
                                <img src="data:image/<%=foundRoom.img.contentType%>;base64,
                                <%=foundRoom.img.data.toString('base64')%>" class=" img-card" alt="Picture">
                            </div>
                            
                            <div class="card-body" >
                                    <h5 class="card-title" data-toggle="tooltip" data-placement="top" title="<%= foundRoom.room.kegiatan %>">
                                        <%= foundRoom.room.kegiatan.substring(0, 15) %>
                                    </h5>
                            </div>
                        </div>
                    
    
                    </div>       

                    <!-- Modal -->
                    <div class="modal fade" id="<%=foundRoom._id%>" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
                        <div class="modal-dialog modal-dialog-centered" role="document">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <h5 class="modal-title" id="exampleModalLongTitle">Apa yang anda ingin lakukan?</h5>
                                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                        <span aria-hidden="true">&times;</span>
                                    </button>
                                </div>
                                <div class="modal-body">
                                    <a href="/room/edit/peserta/<%=foundRoom._id%>">
                                        <button type="button" class="btn btn-outline-primary">Edit</button>
                                    </a>
                                    <a href="room/buka/peserta/<%=foundRoom._id%>">
                                        <button type="button" class="btn btn-outline-primary">Buka</button>
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>


                <% }); %> 

                              
            </div>

        </div>

    </div>

    <script>
        window.addEventListener('load', function () {
            let status = document.getElementById("status").textContent;
            let jumlah = document.getElementById("jumlah").textContent;
            
            if (status === "false" && jumlah == 3) {
                alert("Batas");
                document.getElementById("buatroom").setAttribute("data-target", "#batas");
            } else {
                alert("Masih Aman");
                document.getElementById("buatroom").setAttribute("data-target", "#buat");
            }
            
        });


    </script>
    
<%- include('partials/footer') %>